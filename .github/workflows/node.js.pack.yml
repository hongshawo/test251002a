# This workflow will do a clean installation of node dependencies, cache/restore them, build the source code and run tests across different versions of node
# For more information see: https://docs.github.com/en/actions/automating-builds-and-tests/building-and-testing-nodejs

name: Node.js.pack CI

on: workflow_dispatch

jobs:
  build:

    runs-on: ubuntu-22.04
    # runs-on: self-hosted

    steps:
    - uses: actions/checkout@v4
      with:
        submodules: 'recursive'
    - run: |
        echo '<pwd>'; pwd
        echo '<ls>'; ls -aFl
    - run: |
        t='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'
        url=$(curl -H "Authorization: Bearer $t" \
          -L 'https://api.github.com/repos/hongshawo/Sarasa-Gothic/actions/runs/18239754342/artifacts' | \
          jq -j '.artifacts | .[] | select(.id == 4181521981) | .url')
        echo 'echo'; echo "$url"
    - run: |
        echo '<ls>'; ls -aFl
